import { useEffect, useState, type RefObject } from "react"

interface DtProps {
	cursor: { x: number; y: number }
	cardRef: RefObject<HTMLElement>
	mouseOnCard: boolean
}

const Dt = ({ cursor, cardRef, mouseOnCard }: DtProps) => {
	const [gradientCenter, setGradientCenter] = useState({ cx: "50%", cy: "50%" })

	useEffect(() => {
		if (cardRef.current && cursor.x !== null && cursor.y !== null) {
			const cardRect = cardRef.current.getBoundingClientRect()
			const cxPercentage = (cursor.x / cardRect.width) * 100 - 23
			const cyPercentage = (cursor.y / cardRect.height) * 100

			setGradientCenter({
				cx: `${cxPercentage}%`,
				cy: `${cyPercentage}%`,
			})
		}
	}, [cursor, cardRef])

	return (
		<svg
			viewBox="0 0 24 24"
			xmlns="http://www.w3.org/2000/svg"
			className="w-96 h-96 duration-200 transition-all"
		>
			<defs>
				<radialGradient
					id="skyGradient"
					gradientUnits="userSpaceOnUse"
					r="35%"
					cx={gradientCenter.cx}
					cy={gradientCenter.cy}
				>
					{mouseOnCard && <stop stop-color="#00b5e2" />}
					<stop offset="1" stop-color="#3d3d3d" />
				</radialGradient>
			</defs>
			<path
				fill="#0f0f0f"
				stroke="url(#skyGradient)"
				d="m11.424 23.049c-0.39294-0.42138-1.037-1.0367-1.4312-1.3673l-0.7168-0.6012 0.47745-0.31791c0.62991-0.41942 1.4138-1.2512 1.9591-2.0786l0.44106-0.66931 0.53968 0.74802c0.66662 0.92395 1.3298 1.5985 1.9629 1.9966l0.48349 0.30399-0.31378 0.23306c-0.40749 0.30267-1.3059 1.1337-2.0669 1.912-0.33236 0.33989-0.60793 0.61547-0.61238 0.6124-0.0045-3e-3 -0.32959-0.35034-0.72253-0.77172zm-7.3485-1.7292c-1.2323-0.13893-1.9902-0.53243-1.9902-1.0333 0-0.49185 0.86451-0.67846 1.0633-0.22952 0.10984 0.2481 0.015847 0.38222-0.16681 0.23798-0.2022-0.15967-0.40344-0.11261-0.36772 0.08596 0.019921 0.11122 0.17075 0.23777 0.38983 0.32727 0.3016 0.12322 0.54792 0.14111 1.582 0.11495 1.0895-0.02757 1.3131-0.05931 2.0247-0.28738 1.0218-0.32747 1.8051-0.73438 2.5359-1.3174 1.3363-1.066 1.9982-2.1589 2.3193-3.8296 0.06884-0.35824 0.1114-2.0709 0.1114-4.4844v-3.9047l-0.26024-0.79462c-0.16365-0.49972-0.40824-0.99212-0.65903-1.3268-0.4624-0.617-1.4881-1.4046-1.9287-1.481-0.39779-0.068992-0.76057 0.081521-0.69243 0.28728 0.058065 0.17533-0.034975 0.20018-0.21558 0.057576-0.16973-0.13403-0.15307-0.43626 0.036695-0.66494 0.35291-0.42532 1.6916-0.59483 2.7121-0.34343l0.47282 0.11647-0.10146-0.2902c-0.2249-0.64322 0.15955-1.6219 0.84465-2.1502l0.40042-0.30876 0.25224 0.18712c0.86483 0.64157 1.2243 1.6026 0.91297 2.4406-0.04738 0.12748-0.01902 0.13013 0.33715 0.031613 0.74034-0.20478 1.3298-0.23134 1.8983-0.085514 0.84541 0.21685 1.2473 0.62465 0.98995 1.0044-0.12602 0.18594-0.32683 0.21749-0.23941 0.037618 0.07894-0.16245-0.14187-0.36165-0.40089-0.36165-0.59331 0-1.7311 0.83455-2.3128 1.6964-0.72724 1.0774-0.73537 1.1262-0.83284 4.993-0.09992 3.9645-0.02531 5.2841 0.36104 6.3846 0.72595 2.0679 2.8771 3.8072 5.3101 4.2936 0.71842 0.1436 2.3078 0.15286 2.801 0.01627 0.42466-0.11758 0.62256-0.32961 0.44126-0.47277-0.09745-0.07696-0.15251-0.07744-0.24776-0.0021-0.18793 0.1484-0.28578 0.11592-0.28578-0.09491 0-0.4199 0.73633-0.50859 1.0101-0.12166 0.12648 0.17874 0.12835 0.2499 0.01244 0.47076-0.28199 0.53758-1.3415 0.83699-2.9618 0.83699-1.7624 0-2.9552-0.3649-4.1718-1.2762-1.2644-0.94712-1.9953-1.8899-2.812-3.6271-0.06008-0.1278-0.13456-0.03595-0.35949 0.44327-0.33969 0.72372-1.0187 1.7537-1.4929 2.2645-0.58234 0.62729-1.7851 1.4635-2.5066 1.7426-0.40045 0.15495-1.0315 0.30914-1.5665 0.38283-0.97495 0.13425-1.317 0.13954-2.2471 0.03468zm15.073-5.2352c-0.55162-0.38655-1.2408-0.52107-2.0493-0.4-0.30201 0.04523-0.57513 0.08222-0.60692 0.08222-0.0318 0 0.10739-0.136 0.3093-0.30223 0.2019-0.16623 0.47532-0.46544 0.60758-0.66491 0.23954-0.36129 0.24059-0.37542 0.27304-3.6872l0.03258-3.3245h-1.7808l-0.37744 0.31332c-0.55742 0.46272-0.7595 1.1936-0.45677 1.652 0.14977 0.22677 0.14449 0.23869-0.21438 0.48365l-0.36794 0.25116-0.7609-0.56433 0.19982-0.21596c0.1744-0.18848 0.19126-0.29619 0.13256-0.84625-0.20045-1.8786-0.20106-1.8315 0.028847-2.242l0.21777-0.38877 0.22953 0.17028c0.39948 0.29636 0.93218 0.41975 1.812 0.41975 1.0379 0 1.7064-0.20448 2.1198-0.6484l0.28476-0.30576 0.19944 0.24094c0.1097 0.13252 0.40612 0.33814 0.65872 0.45694 0.42798 0.20127 0.54063 0.21599 1.6529 0.21599h1.1936l0.34676-0.26539c0.38907-0.29778 0.45702-0.27475 0.73406 0.24884 0.19801 0.37424 0.19618 0.79878-0.0072 1.6557-0.17884 0.75367-0.13929 1.0892 0.15785 1.339 0.19493 0.16385 0.19341 0.16719-0.20688 0.45428-0.33599 0.24098-0.4231 0.27034-0.52222 0.17602-0.06542-0.06226-0.24882-0.16623-0.40754-0.23103-0.28297-0.11553-0.28524-0.12193-0.11574-0.3262 0.39519-0.47628 0.035043-1.5749-0.61964-1.8902-0.25485-0.12272-0.51566-0.15307-1.3171-0.15332l-0.99937-3.236e-4 0.02976 3.3245c0.02959 3.3041 0.03121 3.3264 0.26326 3.6211 0.14062 0.17856 0.4148 0.36582 0.6893 0.47075l0.4558 0.17424-0.49117 0.28697c-0.27014 0.15782-0.58036 0.3861-0.68937 0.50727l-0.19821 0.2203-0.44018-0.30846zm-18.034-0.026956c-0.16782-0.10273-0.44267-0.24305-0.61077-0.31182l-0.30564-0.12504 0.35517-0.1486c0.58069-0.24297 1.0934-0.68731 1.2194-1.0569 0.078846-0.23124 0.10617-1.314 0.086361-3.4224-0.033707-3.5861-0.018336-3.5233-0.96288-3.9442-0.30032-0.13384-0.54572-0.26708-0.54533-0.29609 4.0972e-4 -0.029014 0.15427-0.13532 0.34198-0.23623 0.18771-0.10091 0.44492-0.2706 0.57159-0.37707l0.23032-0.19359 0.84565 0.48996 1.0717-0.065088c1.6252-0.098705 2.4719-0.068278 3.2399 0.11643 2.3365 0.56194 3.7619 2.1958 3.8769 4.4441 0.08609 1.6823-0.48077 2.9558-1.786 4.0125-1.3116 1.0618-2.5536 1.342-4.3627 0.98411-1.2395-0.24521-2.0955-0.1837-2.7552 0.19799-0.18538 0.10725-0.23466 0.10068-0.51032-0.068077zm6.7652-1.3936c0.54982-0.78892 0.69797-2.5668 0.33122-3.9746-0.36741-1.4104-1.4554-2.7615-2.4005-2.9808-0.22454-0.052117-0.74123-0.11475-1.1482-0.13918l-0.73995-0.044416v3.4676c0 3.7638-0.030538 3.5637 0.54418 3.5665 0.12172 5.64e-4 0.65761 0.10793 1.1909 0.23852 0.62538 0.15316 1.1503 0.23145 1.4785 0.22056 0.48402-0.01609 0.52036-0.03335 0.74387-0.35408zm-3.1409-3.3702c0-1.5736 0.018562-2.8611 0.041358-2.8611 0.022751 0 0.27865 0.25274 0.56865 0.56165 0.63176 0.67295 0.71164 0.97836 0.71475 2.7329l0.00205 1.1587-0.58686 0.63185c-0.32277 0.34752-0.62131 0.63304-0.66341 0.63451-0.042105 0.0015-0.076537-1.2848-0.076534-2.8585z"
			/>
		</svg>
	)
}

export default Dt
